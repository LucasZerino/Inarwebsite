
<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8" />
        <title>Inar - Blog</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Premium Bootstrap 5 Admin Dashboard Template" />
        <meta name="keywords" content="Saas, CRM, Admin, Dashboard, Modern, Classic" />
        <meta name="author" content="Shreethemes" />
        <meta name="email" content="support@shreethemes.in" />
        <meta name="website" content="https://shreethemes.in" />
        <meta name="Version" content="v3.8.0" />
        <!-- favicon -->
        <link rel="icon" href="./img/favico.ico" type="image/x-icon" />
        <!-- Bootstrap -->
        <link href="/css/dash/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <!-- simplebar -->
        <link href="/css/dash/simplebar.css" rel="stylesheet" type="text/css" />
        <!-- Icons -->
        <link href="/css/dash/materialdesignicons.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/dash/tabler-icons.min.css" rel="stylesheet" type="text/css" />
        <link href="https://unicons.iconscout.com/release/v3.0.6/css/line.css"  rel="stylesheet">
        <!-- Css -->
        <link href="/css/dash/style.css" rel="stylesheet" type="text/css" id="theme-opt" />
        <link href="/css/dash/edit.css" rel="stylesheet" type="text/css" />
    </head>

    <body id="bodyrmv">
        <!-- Loader -->
        <!-- <div id="preloader">
            <div id="status">
                <div class="spinner">
                    <div class="double-bounce1"></div>
                    <div class="double-bounce2"></div>
                </div>
            </div>
        </div> -->
        <!-- Loader -->

        <div class="page-wrapper landrick-theme toggled">
            <nav id="sidebar" class="sidebar-wrapper sidebar-dark">
                <div class="sidebar-content" data-simplebar style="height: calc(100% - 60px);">
                    <div class="sidebar-brand">
                        <a href="index.html">
                            <img src="/img/dash/logo-dark.png" height="24" class="logo-light-mode" alt="">
                            <img src="/img/dash/logo-light.png" height="24" class="logo-dark-mode" alt="">
                            <span class="sidebar-colored">
                                <img src="/img/dash/logo-light.png" height="24" alt="">
                            </span>
                        </a>
                    </div>
                    
                    <ul class="sidebar-menu">
                        <li class="sidebar-dropdown">
                            <button id="botao1" class="a" onclick='exibirUser()'><i class="ti ti-user me-2"></i>Usuário</button>
                            <div class="sidebar-submenu">
                            </div>
                        </li>
                        <li class="sidebar-dropdown">
                            <button id="botao2" class="a ativo" onclick="exibirBlog()"><i class="ti ti-brand-gravatar me-2"></i>Blog</button>
                        </li>
                    </ul>
                    <!-- sidebar-menu  -->
                </div>
                <!-- Sidebar Footer -->
           
                <!-- Sidebar Footer -->
            </nav>
            <!-- sidebar-wrapper -->

            <!-- Start Page Content -->
            <main class="page-content bg-light">
                <div class="top-header">
                    <div class="header-bar d-flex justify-content-between">
                        <div class="d-flex align-items-center">
                            <a href="#" class="logo-icon me-3">
                                <img src="/img/dash/logo-icon.png" height="30" class="small" alt="">
                                <span class="big">
                                    <img src="/img/dash/logo-dark.png" height="24" class="logo-light-mode" alt="">
                                    <img src="/img/dash/logo-light.png" height="24" class="logo-dark-mode" alt="">
                                </span>
                            </a>
                            <a id="close-sidebar" class="btn btn-icon btn-soft-light" href="javascript:void(0)">
                                <i class="ti ti-menu-2"></i>
                            </a>
                        </div>
        
                        <ul class="list-unstyled mb-0">
                        

                            <li class="list-inline-item mb-0 ms-1">
                                <div class="dropdown dropdown-primary">
                                    <button type="button" class="btn btn-soft-light dropdown-toggle p-0" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img src="/img/dash/client/05.png" class="avatar avatar-ex-small rounded" alt=""></button>
                                    <div class="dropdown-menu dd-menu dropdown-menu-end bg-white shadow border-0 mt-3 py-3" style="min-width: 200px;">
                                        <div class="dropdown-item d-flex mouse align-items-center text-dark pb-3" onclick="exibirUser()">
                                            <img src="/img/dash/client/05.png" class="avatar avatar-md-sm rounded-circle border shadow" alt="">
                                            <div class="flex-1 ms-2">
                                                <span class="d-block" id="nameuser"></span>
                                            </div>
                                        </div>
                                        <button class="dropdown-item text-dark" onclick="exibirUser()"><span class="mb-0 d-inline-block me-1"><i class="ti ti-settings"></i></span> Perfil</button>
                                        <form class="sair" method="post">
                                            <input type="hidden" placeholder="Email" name="sair" value="sair" />
                                            <div class="alinha">
                                                <i class="ti ti-logout"></i> <input type="submit" value="Sair" class="btn solid btnsair" />
                                            </div>
                                          </form>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="id" id="iduser"> <%=id%></div>
                </div>

                <div class="container-fluid" id="main1">
                    <div class="layout-specing">
                        <div class="d-md-flex justify-content-between">
                            <div>
                                <h5 class="mb-0">Blogs</h5>

                                <nav aria-label="breadcrumb" class="d-inline-block mt-1">
                                    <ul class="breadcrumb breadcrumb-muted bg-transparent rounded mb-0 p-0">
                                        <li class="breadcrumb-item text-capitalize"><a href="index.html">Inar</a></li>
                                        <li class="breadcrumb-item text-capitalize active" aria-current="page">Blog</li>
                                    </ul>
                                </nav>
                            </div>

                            <div class="mt-4 mt-sm-0">
                                <a href="#" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newblogadd">Add Post</a>
                            </div>
                        </div>
                    
                        <div class="row myContent">
                           
                        </div><!--end row-->
                    </div>
                </div><!--end container-->

                <div class="container-fluid" id="main2">
                    <div class="layout-specing">
                        <div class="d-md-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Configurações de Usuário</h5>
                        </div>
                        <div class="row">
                            <div class="col-lg-6 mt-4">
                                <div class="card border-0 rounded shadow">
                                    <div class="card-body">
                                        <h5 class="text-md-start text-center mb-0">Detalhes do perfil :</h5>
        
                                        <div class="mt-4 text-md-start text-center d-sm-flex">
                                            <img src="/img/dash/client/05.png" class="avatar float-md-left avatar-medium rounded-circle shadow me-md-4" alt="">
                                            
                                            <div class="mt-md-4 mt-3 mt-sm-0">
                                                <a href="javascript:void(0)" class="btn btn-primary mt-2">Mudar foto</a>
                                            </div>
                                        </div>
        
                                        <form>
                                            <div class="row mt-4">
                                                <div class="col-md-12">
                                                    <div class="mb-3">
                                                        <label class="form-label">Nome</label>
                                                        <div class="form-icon position-relative">
                                                            <i data-feather="user" class="fea icon-sm icons"></i>
                                                            <input name="name" id="first" type="text" class="form-control ps-5" placeholder="Nome completo :">
                                                        </div>
                                                    </div>
                                                </div><!--end col-->
                                            </div><!--end row-->
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <input type="submit" id="submit" name="send" class="btn btn-primary" value="Salvar alterações">
                                                </div><!--end col-->
                                            </div><!--end row-->
                                        </form><!--end form-->
                                    </div>
                                </div>
                            </div><!--end col-->

                            <div class="col-lg-6 mt-4">
                                <div class="card border-0 rounded shadow p-4">
                                    <h5 class="mb-0">Alterar Senha :</h5>
                                    <form>
                                        <div class="row mt-4">
                                            <div class="col-lg-12">
                                                <div class="mb-3">
                                                    <label class="form-label">Senha atual :</label>
                                                    <div class="form-icon position-relative">
                                                        <i data-feather="key" class="fea icon-sm icons"></i>
                                                        <input type="password" class="form-control ps-5" placeholder="Senha atual" required="">
                                                    </div>
                                                </div>
                                            </div><!--end col-->
        
                                            <div class="col-lg-12">
                                                <div class="mb-3">
                                                    <label class="form-label">Nova senha :</label>
                                                    <div class="form-icon position-relative">
                                                        <i data-feather="key" class="fea icon-sm icons"></i>
                                                        <input type="password" class="form-control ps-5" placeholder="Nova senha" required="">
                                                    </div>
                                                </div>
                                            </div><!--end col-->
        
                                            <div class="col-lg-12">
                                                <div class="mb-3">
                                                    <label class="form-label">Confirmar nova senha :</label>
                                                    <div class="form-icon position-relative">
                                                        <i data-feather="key" class="fea icon-sm icons"></i>
                                                        <input type="password" class="form-control ps-5" placeholder="Confirme a nova senha" required="">
                                                    </div>
                                                </div>
                                            </div><!--end col-->
        
                                            <div class="col-lg-12 mt-2 mb-0">
                                                <button class="btn btn-primary">Salvar senha</button>
                                            </div><!--end col-->
                                        </div><!--end row-->
                                    </form>
                                </div>
                            </div><!--end col-->

                            <div class="layout-specing">
                                <div class="d-md-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Meus Posts</h5>
                                </div>
        
                                <div class="row">
                                    <div class="col-12 mt-4">
                                        <div class="table-responsive shadow rounded">
                                            <table class="table table-center bg-white mb-0">
                                                <thead>
                                                    <tr>
                                                        <th class="border-bottom p-3">Id</th>
                                                        <th class="text-center border-bottom p-3" style="min-width: 200px;">Dt de criação</th>
                                                        <th class="text-center border-bottom p-3">Dt de modificação</th>
                                                        <th class="text-end border-bottom p-3" style="min-width: 200px;"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <!-- Start -->
                                                    <tr>
                                                        <th class="p-3">#d01</th>
                                                        <td class="text-center p-3">01/01/2021</td>
                                                        <td class="text-center p-3">01/01/2021</td>
                                                        <td class="text-end p-3">
                                                            <div href="invoice.html" class="btn btn-sm btn-primary">editar</div>
                                                            <div href="#" class="btn btn-sm btn-soft-primary ms-2">excluir</div>
                                                        </td>
                                                    </tr>
                                                    <!-- End -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div><!--end col-->
                                </div><!--end row-->
                            </div>

                            
                        </div><!--end row-->
                    </div>
                </div><!--end container-->

                <!-- Footer Start -->
                <footer class="bg-white shadow py-3">
                    <div class="container-fluid">
                        <div class="row align-items-center">
                            <div class="col">
                                <div class="text-sm-start text-center">
                                    <p class="mb-0 text-muted">© <script>document.write(new Date().getFullYear())</script> Webck.</p>
                                </div>
                            </div><!--end col-->
                        </div><!--end row-->
                    </div><!--end container-->
                </footer><!--end footer-->
                <!-- End -->
            </main>
        </div>
        <!-- page-wrapper -->

        <!-- Start Modal -->
        <div class="modal fade" id="newblogadd" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header border-bottom p-3">
                        <h5 class="modal-title" id="exampleModalLabel">Add Blog</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body p-3 pt-4">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="d-grid">
                                    <p class="text-muted">Carregue a capa do blog aqui!.</p>
                                    <div class="preview-box d-block justify-content-center rounded shadow overflow-hidden bg-light p-1"></div>
                                    <div id="apresentar-imagem" class="imagemrecebida"></div>
                                    <input type="file" id="postimg" onchange="converterImagem()" />
                                </div>
                            </div><!--end col-->

                            <div class="col-md-8 mt-4 mt-sm-0">
                                <div class="ms-md-4">
                                    <form>
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="mb-3">
                                                    <label class="form-label">Título do post <span class="text-danger">*</span></label>
                                                    <input onchange="setTitulo()" name="name" id="titulo" type="text" class="form-control" placeholder="Title :">
                                                </div>
                                            </div><!--end col-->
                                            <div class="col-lg-12">
                                                <div class="mb-3">
                                                    <label class="form-label">Conteúdo <span class="text-danger">*</span></label>
                                                    <textarea onchange="setConteudo()" name="comments" id="conteudo" rows="4" class="form-control"></textarea>
                                                </div>
                                            </div><!--end col-->
    
                                            <div class="col-lg-12 text-end">
                                                <div onclick="criarpost()" class="btn btn-primary" data-bs-dismiss="modal" >Postar</div>
                                            </div><!--end col-->
                                        </div>
                                    </form>
                                </div>
                            </div><!--end col-->
                        </div><!--end row-->
                    </div>
                </div>
            </div>
        </div>
        <!-- End modal -->

        <!-- Offcanvas Start -->
        <div class="offcanvas offcanvas-end bg-white shadow" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
            <div class="offcanvas-header border-bottom">
                <h5 id="offcanvasRightLabel" class="mb-0">
                    <img src="/img/dash/logo-dark.png" height="24" class="light-version" alt="">
                    <img src="/img/dash/logo-light.png" height="24" class="dark-version" alt="">
                </h5>
                <button type="button" class="btn-close d-flex align-items-center text-dark" data-bs-dismiss="offcanvas" aria-label="Close"><i class="mdi mdi-close fs-4"></i></button>
            </div>
            <div class="offcanvas-body p-4 px-md-5">
                <div class="row">
                    <div class="col-12">
                        <!-- Style switcher -->
                        <div id="style-switcher">
                            <div>
                                <ul class="text-center list-unstyled mb-0">
                                    <li class="d-grid"><a href="javascript:void(0)" class="rtl-version t-rtl-light" onclick="setTheme('style-rtl')"><img src="/img/dash/demos/rtl.png" class="img-fluid rounded-md shadow-md d-block" alt=""><span class="text-muted mt-2 d-block">RTL Version</span></a></li>
                                    <li class="d-grid"><a href="javascript:void(0)" class="ltr-version t-ltr-light" onclick="setTheme('style')"><img src="/img/dash/demos/ltr.png" class="img-fluid rounded-md shadow-md d-block" alt=""><span class="text-muted mt-2 d-block">LTR Version</span></a></li>
                                    <li class="d-grid"><a href="javascript:void(0)" class="dark-rtl-version t-rtl-dark" onclick="setTheme('style-dark-rtl')"><img src="/img/dash/demos/dark-rtl.png" class="img-fluid rounded-md shadow-md d-block" alt=""><span class="text-muted mt-2 d-block">RTL Version</span></a></li>
                                    <li class="d-grid"><a href="javascript:void(0)" class="dark-ltr-version t-ltr-dark" onclick="setTheme('style-dark')"><img src="/img/dash/demos/dark.png" class="img-fluid rounded-md shadow-md d-block" alt=""><span class="text-muted mt-2 d-block">LTR Version</span></a></li>
                                    <li class="d-grid"><a href="javascript:void(0)" class="dark-version t-dark mt-4" onclick="setTheme('style-dark')"><img src="/img/dash/demos/dark.png" class="img-fluid rounded-md shadow-md d-block" alt=""><span class="text-muted mt-2 d-block">Dark Version</span></a></li>
                                    <li class="d-grid"><a href="javascript:void(0)" class="light-version t-light mt-4" onclick="setTheme('style')"><img src="/img/dash/demos/ltr.png" class="img-fluid rounded-md shadow-md d-block" alt=""><span class="text-muted mt-2 d-block">Light Version</span></a></li>
                                    <li class="d-grid"><a href="../landing/index.html" target="_blank" class="mt-4"><img src="/img/dash/demos/landing.png" class="img-fluid rounded-md shadow-md d-block" alt=""><span class="text-muted mt-2 d-block">Landing Demos</span></a></li>
                                </ul>
                            </div>
                        </div>
                        <!-- end Style switcher -->
                    </div><!--end col-->
                </div>
            </div>

            <div class="offcanvas-footer p-3 border-top text-center">
                <ul class="list-unstyled social-icon mb-0">
                    <li class="list-inline-item mb-0"><a href="https://1.envato.market/4n73n" target="_blank" class="rounded"><i class="ti ti-shopping-cart align-middle" title="Buy Now"></i></a></li>
                    <li class="list-inline-item mb-0"><a href="https://dribbble.com/shreethemes" target="_blank" class="rounded"><i class="ti ti-brand-dribbble align-middle" title="dribbble"></i></a></li>
                    <li class="list-inline-item mb-0"><a href="https://www.facebook.com/shreethemes" target="_blank" class="rounded"><i class="ti ti-brand-facebook align-middle" title="facebook"></i></a></li>
                    <li class="list-inline-item mb-0"><a href="https://www.instagram.com/shreethemes/" target="_blank" class="rounded"><i class="ti ti-brand-instagram align-middle" title="instagram"></i></a></li>
                    <li class="list-inline-item mb-0"><a href="https://twitter.com/shreethemes" target="_blank" class="rounded"><i class="ti ti-brand-twitter align-middle" title="twitter"></i></a></li>
                    <li class="list-inline-item mb-0"><a href="mailto:support@shreethemes.in" class="rounded"><i class="ti ti-mail align-middle" title="email"></i></a></li>
                    <li class="list-inline-item mb-0"><a href="https://shreethemes.in" target="_blank" class="rounded"><i class="ti ti-world align-middle" title="website"></i></a></li>
                </ul><!--end icon-->
            </div>
        </div>
        <!-- Offcanvas End -->


        <script>

async function getPosts() {
                let response = await fetch("http://localhost:3334/post");
                data = await response.json();
                posts = data;

                //para cada post criar um post
                const myContent = document.querySelector(".myContent")

                const showInHtml = posts.map((project, index) => {
                    return `
                    <div class="col-xl-3 col-lg-4 col-md-6 mt-4">
                                <div class="card blog blog-primary rounded border-0 shadow overflow-hidden">
                                    <div class="position-relative">
                                        <img src=${project.image} class="card-img-top imagempost" alt="...">
                                        <div class="overlay rounded-top"></div>
                                    </div>
                                    <div class="card-body content">
                                        <h5><a class="card-title title text-dark">${project?.title}</a></h5>
                                    </div>
                                    <div class="author">
                                        <small class="text-light user d-block"><i class="uil uil-user"></i> ${project?.author}</small>
                                    </div>
                                </div>
                            </div>
                            `
                })

                myContent.innerHTML = showInHtml
                return data;
            }


            function setTitulo(){
                        titulo = document.getElementById('titulo').value;
                    }

            function setConteudo(){
                        conteudo = document.getElementById('conteudo').value;
                    }       

            let idusuario = document.getElementById("iduser").outerText;

            var myHeaders = new Headers();
            myHeaders.append("Cookie", "connect.sid=s%3AheVceINIG16mIdY3TsjJDx08YljROVIa.mFkTx7jlwah%2BTttHWOS4MkjCYwvzD3F1hoYk39wsnOU");

            var requestOptions = {
            method: 'GET',
            headers: myHeaders,
            redirect: 'follow'
            };


            let userdados;
            let nameuser
            let emailuser;
            let passuser;

            getDatos();
            getPosts();
            async function getDatos() {
                let response = await fetch("http://localhost:3334/user/"+idusuario, requestOptions);
                let data = await response.json();
                nameuser = data?.name;
                emailuser = data?.email;
                passuser = data?.password;

                document.getElementById("nameuser").innerHTML = nameuser;
                return data;
            }

           

            let imagemBase64;

            function converterImagem(){
                var receberArquivo = document.getElementById("postimg").files;

                if(receberArquivo.length>0){
                    var carregarImagem = receberArquivo[0];

                    var lerArquivo = new FileReader();

                    lerArquivo.onload = function(arquivoCarregado){
                    imagemBase64 = arquivoCarregado.target.result;       
                       
                    }
                    lerArquivo.readAsDataURL(carregarImagem);
                }
            }

            function criarpost(){
                const element = document.getElementById('newblogadd')
                element.classList.remove('show');
                element.style.display = "none";
                element.removeAttribute('role');
                const element2 = document.getElementById('bodyrmv')
                element2.classList.remove("modal-open");
                element.style.overflow = "auto";
            
                setTimeout(() => {
                            console.log("tentei pegar os posts!")
                            getPosts();
                        }, "2000")
                var myHeaders = new Headers();
                myHeaders.append("Content-Type", "application/json");
                myHeaders.append("Cookie", "connect.sid=s%3AlbeclBJ8ODed7KtDVEsGNowrxwLYno4j.pJV%2Bu1H0IEliKqa49VuGOuQ1UvJXwyXkrncI0sodFro");

                        var raw = JSON.stringify({
                        "title": titulo,
                        "content": conteudo,
                        "authorId": Number(idusuario),
                        "author": nameuser,
                        "image": imagemBase64
                        });

                        var requestOptions = {
                        method: 'POST',
                        headers: myHeaders,
                        body: raw,
                        redirect: 'follow'
                        };

                        fetch("http://localhost:3334/post", requestOptions)
                        .then(response => response.text())
                        .then(result => console.log(result))
                        .catch(error => console.log('error', error));
                            }
        </script>

        <script>
            //Mostrar tela
                function exibirBlog(){
                var div2 = document.getElementById("main2");
                div2.style.display = "none";
                document.getElementById("botao1").classList.remove("ativo");
                var div = document.getElementById("main1");
                div.style.display = "block";
                document.getElementById("botao2").classList.add("ativo");
                }

                function exibirUser(){
                var div = document.getElementById("main1");
                div.style.display = "none";
                document.getElementById("botao2").classList.remove("ativo");
                var div2 = document.getElementById("main2");
                div2.style.display = "block";
                document.getElementById("botao1").classList.add("ativo");
                }

        </script>
        <!-- javascript -->
        <script src="/js/dash/bootstrap.bundle.min.js"></script>
        <!-- simplebar -->
        <script src="/js/dash/simplebar.min.js"></script>
        <!-- Icons -->
        <script src="/js/dash/feather.min.js"></script>
        <!-- Main Js -->
        <script src="/js/dash/plugins.init.js"></script>
        <script src="/js/dash/app.js"></script>
        <script>
            const handleChange = () => {
            const fileUploader = document.querySelector('#input-file');
                const getFile = fileUploader.files
                if (getFile.length !== 0) {
                    const uploadedFile = getFile[0];
                    readFile(uploadedFile);
                }
            }

            const readFile = (uploadedFile) => {
                if (uploadedFile) {
                    const reader = new FileReader();
                    reader.onload = () => {
                    const parent = document.querySelector('.preview-box');
                    parent.innerHTML = `<img class="preview-content" src=${reader.result} />`;
                    };
                    
                    reader.readAsDataURL(uploadedFile);
                }
            };
        </script>
    </body>

</html>